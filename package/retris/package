#!/usr/bin/env bash
# Copyright (c) 2020 The Toltec Contributors
# SPDX-License-Identifier: MIT

pkgnames=(retris)
pkgdesc="Tetris game"
url=https://github.com/LinusCDE/retris
pkgver=0.6.2-1
timestamp=2021-01-30T00:01Z
section="games"
maintainer="Linus K. <linus@cosmos-ink.net>"
license=MIT

image=rust:v1.2.1
source=(https://github.com/LinusCDE/retris/archive/0.6.2-1.zip)
sha256sums=(da24e7ef087a38d33d5d92a39d8d3d726daf6fa277c88d96e99f5f97a746285b)

build() {
    # Fall back to system-wide config
    rm .cargo/config

    cargo build --release
}

package() {
    install -D -m 755 -t "$pkgdir"/opt/bin "$srcdir"/target/armv7-unknown-linux-gnueabihf/release/retris
    install -D -m 644 "$srcdir"/oxide "$pkgdir"/opt/etc/draft/retris
    install -D -m 644 "$srcdir"/icon.png "$pkgdir"/opt/etc/draft/icons/retris.png
}
